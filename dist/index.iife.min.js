/*!
 * react-async-task v0.0.0
 * (c) Vitor Luiz Cavalcanti
 * Released under the MIT License.
 */
var ReactAsyncTask=function(n,e){"use strict";var r,t=function(){return t=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var u in e=arguments[r])Object.prototype.hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n},t.apply(this,arguments)};function u(n,e,r,t){return new(r||(r=Promise))((function(u,o){function a(n){try{s(t.next(n))}catch(n){o(n)}}function c(n){try{s(t.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?u(n.value):(e=n.value,e instanceof r?e:new r((function(n){n(e)}))).then(a,c)}s((t=t.apply(n,e||[])).next())}))}function o(n,e){var r,t,u,o,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(u=2&o[0]?t.return:o[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,o[1])).done)return u;switch(t=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,t=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(u=a.trys,(u=u.length>0&&u[u.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){a.label=o[1];break}if(6===o[0]&&a.label<u[1]){a.label=u[1],u=o;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(o);break}u[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(n,a)}catch(n){o=[6,n],t=0}finally{r=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}!function(n){n.FAILED="FAILED",n.STARTED="STARTED",n.FINISHED="FINISHED",n.SUCCEEDED="SUCCEEDED"}(r||(r={}));var a=r;function c(n,e){switch(e.type){case a.STARTED:return t(t({},n),{pendingTasks:n.pendingTasks+1});case a.FINISHED:return t(t({},n),{pendingTasks:n.pendingTasks-1});case a.FAILED:return t(t({},n),{error:e.error,result:null});case a.SUCCEEDED:return t(t({},n),{error:null,result:e.result});default:throw new Error("Invalid action type.")}}function s(){return{error:null,result:null,pendingTasks:0}}function l(){return"undefined"==typeof AbortController?null:new AbortController}function i(){var n=e.useRef(!0);return e.useLayoutEffect((function(){return function(){n.current=!1}}),[]),e.useCallback((function(){return n.current}),[])}function f(){var n=this,r=function(){var n,r=i(),t=e.useState(l),u=t[0],o=t[1];return e.useLayoutEffect((function(){return function(){return null==u?void 0:u.abort()}}),[u]),{abort:e.useCallback((function(){r()&&o(l)}),[r]),signal:null!==(n=null==u?void 0:u.signal)&&void 0!==n?n:null}}().signal,t=function(){var n=i(),r=e.useReducer(c,e.useMemo(s,[])),t=r[0],u=r[1];return[t,e.useCallback((function(e){n()&&u(e)}),[])]}(),f=t[0],p=t[1],y=e.useCallback((function(e){return u(n,void 0,void 0,(function(){var n,t,u;return o(this,(function(o){switch(o.label){case 0:p({type:a.STARTED}),o.label=1;case 1:return o.trys.push([1,3,4,5]),n=p,u={type:a.SUCCEEDED},[4,e({signal:null!=r?r:void 0})];case 2:return n.apply(void 0,[(u.result=o.sent(),u)]),[3,5];case 3:return t=o.sent(),c=t,"undefined"!=typeof DOMException&&c instanceof DOMException&&"AbortError"===c.name?[2]:(p({type:a.FAILED,error:t}),[3,5]);case 4:return p({type:a.FINISHED}),[7];case 5:return[2]}var c}))}))}),[]);return{error:f.error,result:f.result,pending:f.pendingTasks>0,executeAsyncTask:y}}return n.useAsyncTask=function(n){var r=e.useRef(!0),t=f(),u=t.error,o=t.result,a=t.pending,c=t.executeAsyncTask;return e.useLayoutEffect((function(){r.current=!1,c(n)}),[n,c]),{error:u,result:o,pending:r.current||a}},n.useAsyncTaskLazy=f,Object.defineProperty(n,"__esModule",{value:!0}),n}({},React);
//# sourceMappingURL=index.iife.min.js.map
